# 系统公告管理功能说明

## 功能概述
系统现已支持教务处老师动态管理首页显示的公告，不再需要修改代码。

## 使用方法

### 教务处老师操作步骤

1. **登录系统**
   - 使用教务处账号登录系统

2. **进入公告管理**
   - 点击左侧菜单：系统管理 → 通知公告
   - 或直接访问路径：`/system/notice`

3. **管理公告**
   
   **新增公告：**
   - 点击"新增"按钮
   - 填写公告标题（必填）
   - 选择公告类型：
     * `通知公告`：显示为黄色"通知"标签
     * `系统消息`：显示为红色"重要"标签
   - 填写公告内容
   - 状态选择"正常"
   - 点击"确定"保存

   **修改公告：**
   - 在公告列表中找到要修改的公告
   - 点击"修改"按钮
   - 编辑内容后保存

   **删除公告：**
   - 在公告列表中找到要删除的公告
   - 点击"删除"按钮确认删除

   **停用/启用公告：**
   - 修改公告的"状态"字段
   - "正常"：公告会在首页显示
   - "停用"：公告不会在首页显示

4. **查看效果**
   - 返回首页查看公告显示效果
   - 首页会自动显示最新的5条"正常"状态的公告

## 公告类型与显示样式

| 公告类型 | 首页标签 | 标签颜色 | 使用场景 |
|---------|---------|---------|----------|
| 系统消息 | 重要 | 红色 | 重要通知、紧急公告 |
| 通知公告 | 通知 | 黄色 | 一般通知、提醒事项 |

## 技术实现

### 前端修改
- **文件**: `ruoyi-ui/src/views/index.vue`
- **改动**: 
  - 导入公告API: `import { listNotice } from "@/api/system/notice"`
  - 添加`loadNotices()`方法从后端获取公告
  - 公告数据由硬编码改为API调用

### 后端
- 使用RuoYi框架内置的`sys_notice`表和公告管理接口
- 无需修改后端代码

### 数据库
- **表**: `sys_notice`
- **权限配置**: 
  - 教务处角色(role_id=4)已授权公告管理菜单权限
  - 包括：查询、新增、修改、删除权限

## 注意事项

1. **公告数量**: 首页默认显示最新的5条公告，按创建时间倒序排列
2. **公告状态**: 只有状态为"正常"(status='0')的公告才会在首页显示
3. **公告排序**: 公告按创建时间倒序显示，最新的公告显示在最上面
4. **权限控制**: 只有教务处角色和管理员角色可以管理公告
5. **实时更新**: 用户刷新首页后即可看到最新的公告内容

## 常见问题

**Q: 新增的公告为什么没有在首页显示？**
A: 请检查：
   1. 公告状态是否为"正常"
   2. 首页是否已刷新
   3. 如果公告数量超过5条，旧公告会被挤出显示范围

**Q: 如何调整首页显示的公告数量？**
A: 修改`ruoyi-ui/src/views/index.vue`文件中`loadNotices()`方法的`pageSize`参数

**Q: 如何修改公告的显示样式？**
A: 修改`ruoyi-ui/src/views/index.vue`文件中`.notice-list`相关的CSS样式

## 部署说明

如需在新环境部署此功能，请执行：
```bash
mysql -u root -p < sql/notice_feature.sql
```

该脚本会：
1. 添加初始公告数据
2. 为教务处角色配置公告管理权限
